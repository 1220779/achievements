#!/bin/bash
set -e # Stop on errors

if [ ! -f ".env" ]; then
  cp .env.default .env
fi

export $(cat .env | sed 's/#.*//g'| xargs)

if [ ! -d "container" ]; then
  mkdir container
fi

if [ "$REPO_CREATED" = "false" ]; then
  sed -i "s/REPO_CREATED=false/REPO_CREATED=true/g" .env
  cd container
  gh repo create $REPO_NAME --private --clone
  cd $REPO_NAME
  git init
  git checkout -B main
else
  cd container/$REPO_NAME
fi

echo $REPO_NAME
